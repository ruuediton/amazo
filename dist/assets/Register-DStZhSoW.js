import{r as s,u as S,R as P,j as e,s as h}from"./index-BauRbZeW.js";const z=({onNavigate:m,onOpenSupport:R,showToast:r})=>{const[i,b]=s.useState(!1),[o,y]=s.useState(!1),[n,v]=s.useState(""),[l,j]=s.useState(""),[u,N]=s.useState(""),[x,w]=s.useState(!1),{withLoading:k}=S(),[c,X]=s.useState(!1),[d,f]=s.useState("");P.useEffect(()=>{const t=new URLSearchParams(window.location.search).get("ref");t&&f(t)},[]);const C=async a=>{if(a.preventDefault(),!x){r==null||r("Voc√™ deve concordar com os Termos de Servi√ßo.","warning");return}if(l.length!==6){r==null||r("A senha deve ter 6 d√≠gitos.","error");return}if(l!==u){r==null||r("As senhas n√£o coincidem.","error");return}if(n.length<9){r==null||r("N√∫mero de telefone inv√°lido.","error");return}try{await k(async()=>{if(!d){r==null||r("C√≥digo de convite √© obrigat√≥rio.","error");return}const t=`${n.replace(/\s/g,"")}@deepbank.user`,{data:p,error:g}=await h.auth.signUp({email:t,password:l,options:{data:{phone:n,referred_by:d||null}}});if(g)throw g;p.user&&await h.from("profiles").update({phone:n}).eq("id",p.user.id)},"Registro sucedido!"),m("login")}catch(t){t.message&&t.message.includes("Auth")}};return e.jsx("div",{className:"bg-background-dark font-display text-black antialiased min-h-screen",children:e.jsx("div",{className:"relative flex min-h-screen w-full flex-col overflow-x-hidden max-w-md mx-auto",children:e.jsxs("main",{className:"flex-1 px-0 pb-8",children:[e.jsxs("div",{className:"w-full overflow-hidden mb-6 relative",children:[e.jsx("img",{src:"/banner_register.png",alt:"Amazon Banner",className:"w-full h-auto block object-contain"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-background-dark via-background-dark/20 to-transparent"})]}),e.jsxs("div",{className:"px-5",children:[e.jsxs("div",{className:"mb-8 pt-2",children:[e.jsx("h1",{className:"text-[32px] font-bold leading-tight tracking-tight mb-2",children:"Crie sua conta"}),e.jsx("p",{className:"text-text-secondary text-base font-normal",children:"Junte-se ao futuro dos servi√ßos banc√°rios e compras."})]}),e.jsxs("form",{className:"flex flex-col gap-5",onSubmit:C,children:[e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("label",{className:"text-sm font-bold text-text-secondary uppercase tracking-wider",children:"N√∫mero de Telefone"}),e.jsxs("div",{className:"relative",children:[e.jsxs("div",{className:"absolute inset-y-0 left-0 flex items-center pl-4 pointer-events-none",children:[e.jsx("span",{className:"text-xl mr-2",children:"üá¶üá¥"}),e.jsx("span",{className:"text-base font-medium text-text-primary",children:"+244"}),e.jsx("div",{className:"ml-3 h-6 w-px bg-amazon-border"})]}),e.jsx("input",{className:"flex w-full rounded-lg border border-amazon-border bg-surface-dark pl-[7.5rem] pr-4 h-12 text-base focus:border-primary focus:ring-1 focus:ring-primary focus:outline-none transition-all placeholder:text-text-secondary/30",placeholder:"9XX XXX XXX",type:"tel",value:n,onChange:a=>v(a.target.value),required:!0})]})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("label",{className:"text-sm font-bold text-text-secondary uppercase tracking-wider",children:"Senha"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{className:"flex w-full rounded-lg border border-amazon-border bg-surface-dark pl-4 pr-12 h-12 text-base focus:border-primary focus:ring-1 focus:ring-primary focus:outline-none transition-all placeholder:text-text-secondary/30",placeholder:"6 d√≠gitos num√©ricos",type:i?"text":"password",inputMode:"numeric",value:l,onChange:a=>{const t=a.target.value.replace(/\D/g,"").slice(0,6);j(t)},required:!0}),e.jsx("button",{type:"button",onClick:()=>b(!i),className:"absolute right-0 top-0 h-full w-12 flex items-center justify-center text-gray-500 hover:text-primary transition-colors",children:e.jsx("span",{className:"material-symbols-outlined text-xl",children:i?"visibility":"visibility_off"})})]})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("label",{className:"text-sm font-medium leading-none text-gray-700",children:"Confirmar Senha"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{className:"flex w-full rounded-lg border border-border-dark bg-surface-dark px-4 h-12 text-base focus:border-primary focus:ring-1 focus:ring-primary focus:outline-none transition-all placeholder:text-[text-gray-400]",placeholder:"Repita a senha",type:o?"text":"password",inputMode:"numeric",value:u,onChange:a=>{const t=a.target.value.replace(/\D/g,"").slice(0,6);N(t)},required:!0}),e.jsx("button",{type:"button",onClick:()=>y(!o),className:"absolute right-0 top-0 h-full w-12 flex items-center justify-center text-gray-500 hover:text-primary transition-colors",children:e.jsx("span",{className:"material-symbols-outlined text-xl",children:o?"visibility":"visibility_off"})})]})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsxs("label",{className:"text-sm font-bold text-text-secondary uppercase tracking-wider",children:["C√≥digo de Convite ",e.jsx("span",{className:"text-primary",children:"*"})]}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 flex items-center pl-4 pointer-events-none",children:e.jsx("span",{className:"material-symbols-outlined text-xl text-text-secondary",children:"group_add"})}),e.jsx("input",{className:`flex w-full rounded-lg border border-amazon-border bg-surface-dark pl-12 pr-4 h-12 text-base focus:border-primary focus:ring-1 focus:ring-primary focus:outline-none transition-all placeholder:text-text-secondary/30 ${new URLSearchParams(window.location.search).get("ref")?"opacity-70 cursor-not-allowed":""}`,placeholder:"AO####",type:"text",value:d,onChange:a=>{new URLSearchParams(window.location.search).get("ref")||f(a.target.value.toUpperCase().slice(0,6))},required:!0,readOnly:!!new URLSearchParams(window.location.search).get("ref")})]})]}),e.jsxs("div",{className:"flex items-start gap-3 mt-2",children:[e.jsx("div",{className:"flex h-6 items-center",children:e.jsx("input",{className:"h-5 w-5 rounded border-amazon-border bg-surface-dark text-primary focus:ring-offset-0 focus:ring-primary transition duration-150 ease-in-out cursor-pointer",id:"terms",name:"terms",type:"checkbox",checked:x,onChange:a=>w(a.target.checked)})}),e.jsx("div",{className:"text-sm leading-6",children:e.jsxs("label",{className:"font-bold text-text-secondary",htmlFor:"terms",children:["Eu concordo com os ",e.jsx("a",{className:"text-primary hover:underline underline-offset-2",href:"#",children:"Termos de Servi√ßo"})," e a ",e.jsx("a",{className:"text-primary hover:underline underline-offset-2",href:"#",children:"Pol√≠tica de Privacidade"}),"."]})})]}),e.jsx("button",{type:"submit",disabled:c,className:`mt-4 flex w-full items-center justify-center rounded-lg bg-primary py-3 text-base font-bold text-black shadow-lg shadow-primary/10 hover:bg-yellow-400 active:scale-[0.98] transition-all cursor-pointer ${c?"opacity-50 cursor-not-allowed":""}`,children:c?"Criando Conta...":"Criar Conta"}),e.jsxs("p",{className:"text-center text-sm font-medium text-text-secondary mt-2",children:["J√° tem uma conta? ",e.jsx("button",{type:"button",onClick:()=>m("login"),className:"text-primary hover:text-primary-hover ml-1 font-bold",children:"Entrar"})]})]})]})]})})})};export{z as default};
