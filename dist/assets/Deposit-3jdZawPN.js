import{r as n,u as w,j as e,s as c}from"./index-BauRbZeW.js";const B=({onNavigate:l,showToast:a})=>{const[o,d]=n.useState(""),{withLoading:m}=w(),[u,f]=n.useState([]),[h,x]=n.useState(!1),[z,C]=n.useState(!1),[s,b]=n.useState("bank"),[S,g]=n.useState([]);n.useEffect(()=>{(async()=>{await m(async()=>{await Promise.all([y(),j()])})})()},[]);const j=async()=>{const{data:{user:t}}=await c.auth.getUser();if(!t)return;const{data:r}=await c.from("depositos_clientes").select("*").eq("user_id",t.id).order("created_at",{ascending:!1}).limit(3);r&&g(r)},y=async()=>{const{data:t,error:r}=await c.from("bancos_empresa").select("*").eq("ativo",!0);!r&&t&&f(t)},k=[3e3,9e3,24e3,49e3,12e4,15e4,4e5],N=t=>{d(t.toString())},v=()=>{if(s==="usdt"){const r=u.find(i=>i.nome_do_banco==="USDT"||i.nome_do_banco==="USTD");if(!r){a==null||a("Carteira USDT indisponível no momento.","error");return}l("deposit-usdt",{amount:o,bank:r});return}const t=parseFloat(o);if(isNaN(t)||t<3e3){a==null||a("Valor mínimo de depósito: 3.000 KZ","warning");return}if(t>1e6){a==null||a("Valor máximo permitido: 1.000.000 KZ","warning");return}x(!0)},_=async t=>{x(!1);try{await m(async()=>{const{data:{user:r}}=await c.auth.getUser();if(!r){a==null||a("Sessão expirada. Faça login novamente.","error"),l("login");return}const{data:i,error:p}=await c.rpc("create_deposit_request",{p_amount:parseFloat(o),p_bank_name:t.nome_do_banco,p_iban:t.iban});if(p)throw p;i.success&&l("confirme",{deposit:{...i.data,nome_destinatario:t.nome_destinatario,nome_banco:t.nome_do_banco}})},"Depósito criado com sucesso. Efetue a transferência e envie o comprovativo.")}catch{}};return e.jsxs("div",{className:"relative flex h-full min-h-screen w-full flex-col bg-background-dark group/design-root overflow-x-hidden font-display text-black pb-32",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 pb-2 sticky top-0 z-10 bg-background-dark",children:[e.jsx("button",{onClick:()=>l("profile"),className:"text-primary flex size-12 shrink-0 items-center justify-center cursor-pointer rounded-full hover:bg-white/10 transition-colors",children:e.jsx("span",{className:"material-symbols-outlined",children:"arrow_back"})}),e.jsx("h2",{className:"text-black text-lg font-bold leading-tight tracking-[-0.015em] flex-1 text-center pl-12",children:"Depósito"}),e.jsx("button",{onClick:()=>l("deposit-history"),className:"text-gray-400 flex size-12 shrink-0 items-center justify-center cursor-pointer rounded-full hover:bg-white/10 transition-colors",children:e.jsx("span",{className:"material-symbols-outlined",children:"history"})})]}),e.jsxs("div",{className:"flex flex-col flex-1 px-4 mt-2",children:[e.jsxs("div",{className:"flex flex-col items-center justify-center py-6",children:[e.jsx("p",{className:"text-[text-gray-500] text-sm font-medium leading-normal mb-2",children:"Inserir Quantia"}),e.jsxs("div",{className:"relative flex items-center justify-center w-full max-w-[320px]",children:[e.jsx("span",{className:"text-3xl font-bold text-black absolute left-2 pointer-events-none",children:"Kz"}),e.jsx("input",{autoFocus:!0,className:"flex w-full bg-transparent text-center text-5xl font-bold text-black placeholder:text-black/10 focus:outline-none border-none p-0 h-16 caret-primary pl-10",placeholder:"0",type:"number",value:o,onChange:t=>d(t.target.value)})]}),e.jsx("p",{className:"text-[text-gray-500] text-xs font-medium mt-3",children:"Min: 3.000 Kz - Max: 1.000.000 Kz"})]}),e.jsxs("div",{className:"flex gap-3 py-4 justify-center flex-wrap",children:[k.map(t=>e.jsx("button",{onClick:()=>N(t),className:"flex h-9 items-center justify-center rounded-full bg-amazon-light-gray px-4 hover:bg-gray-200 transition-colors cursor-pointer border border-amazon-border focus:border-primary",children:e.jsxs("p",{className:"text-[text-black] text-sm font-bold leading-normal",children:["+",t.toLocaleString()]})},t)),e.jsx("button",{onClick:()=>d("1000000"),className:"flex h-9 items-center justify-center rounded-full bg-amazon-light-gray px-4 hover:bg-gray-200 transition-colors cursor-pointer border border-amazon-border focus:border-primary",children:e.jsx("p",{className:"text-[text-black] text-sm font-bold leading-normal",children:"Máx"})})]}),e.jsx("div",{className:"h-6"}),e.jsxs("div",{className:"flex flex-col gap-3",children:[e.jsx("p",{className:"text-text-primary text-base font-black leading-normal mb-1",children:"Método de Depósito"}),e.jsxs("div",{onClick:()=>b("bank"),className:`flex items-center gap-4 bg-surface-dark p-4 rounded-xl border-2 transition-all cursor-pointer relative overflow-hidden ${s==="bank"?"border-primary shadow-md":"border-amazon-border opacity-70"}`,children:[s==="bank"&&e.jsx("div",{className:"absolute top-0 right-0 p-2 text-primary",children:e.jsx("span",{className:"material-symbols-outlined filled text-[20px]",children:"check_circle"})}),e.jsxs("div",{className:"flex items-center gap-4 flex-1",children:[e.jsx("div",{className:`flex items-center justify-center h-10 w-14 shrink-0 rounded-lg ${s==="bank"?"bg-primary/10 text-primary border border-primary/20":"bg-background-dark text-text-secondary border border-amazon-border"}`,children:e.jsx("span",{className:"material-symbols-outlined text-2xl",children:"account_balance"})}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("p",{className:"text-text-primary text-sm font-black leading-tight",children:"Transferência Bancária"}),e.jsx("p",{className:"text-text-secondary text-[11px] leading-tight",children:"Envio de Kz via MultiCaixa"})]})]})]}),e.jsxs("div",{onClick:()=>b("usdt"),className:`flex items-center gap-4 bg-surface-dark p-4 rounded-xl border-2 transition-all cursor-pointer relative overflow-hidden ${s==="usdt"?"border-[#26a17b] shadow-md":"border-amazon-border opacity-70"}`,children:[s==="usdt"&&e.jsx("div",{className:"absolute top-0 right-0 p-2 text-[#26a17b]",children:e.jsx("span",{className:"material-symbols-outlined filled text-[20px]",children:"check_circle"})}),e.jsxs("div",{className:"flex items-center gap-4 flex-1",children:[e.jsx("div",{className:`flex items-center justify-center h-10 w-14 shrink-0 rounded-lg ${s==="usdt"?"bg-[#26a17b]/10 text-[#26a17b] border border-[#26a17b]/20":"bg-background-dark text-text-secondary border border-amazon-border"}`,children:e.jsx("span",{className:"material-symbols-outlined text-2xl",children:"currency_bitcoin"})}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("p",{className:"text-text-primary text-sm font-black leading-tight",children:"Recarregar USDT (TRC20)"}),e.jsx("p",{className:"text-[#26a17b] text-[11px] font-bold leading-tight",children:"Depósito Cripto Instantâneo"})]})]})]})]}),e.jsx("div",{className:"h-8"}),e.jsx("button",{onClick:v,className:"flex w-full cursor-pointer items-center justify-center overflow-hidden rounded-xl h-12 px-5 bg-primary hover:bg-[#eac515] text-[text-black] text-sm font-black leading-normal tracking-[0.015em] transition-all active:scale-[0.98] shadow-lg shadow-primary/20",children:"Confirmar Depósito"}),e.jsxs("div",{className:"flex justify-center items-center gap-2 mt-3 text-[text-gray-500]",children:[e.jsx("span",{className:"material-symbols-outlined text-sm",style:{fontSize:"16px"},children:"lock"}),e.jsx("p",{className:"text-xs font-medium",children:"Transação segura criptografada de 256 bits"})]})]}),h&&e.jsx("div",{className:"fixed inset-0 z-[100] flex items-end justify-center bg-black/60 backdrop-blur-sm p-4",children:e.jsxs("div",{className:"w-full max-w-md bg-surface-dark rounded-t-3xl p-6 animate-in slide-in-from-bottom-full duration-300 shadow-2xl border-t border-white/10 pb-10",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h3",{className:"text-xl font-bold",children:"Escolha um Banco"}),e.jsx("button",{onClick:()=>x(!1),className:"size-10 flex items-center justify-center rounded-full bg-white/5 text-black/60",children:e.jsx("span",{className:"material-symbols-outlined",children:"close"})})]}),e.jsx("div",{className:"flex flex-col gap-3",children:u.map(t=>e.jsxs("button",{onClick:()=>_(t),className:"flex items-center gap-4 p-4 rounded-2xl bg-white/5 border border-gray-200 hover:border-primary/50 hover:bg-primary/5 transition-all text-left",children:[e.jsx("div",{className:"size-10 rounded-full bg-primary/10 flex items-center justify-center text-primary",children:e.jsx("span",{className:"material-symbols-outlined",children:"account_balance"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-bold text-black",children:t.nome_do_banco}),e.jsx("p",{className:"text-xs text-gray-600",children:"Clique para selecionar"})]})]},t.id))})]})})]})};export{B as default};
