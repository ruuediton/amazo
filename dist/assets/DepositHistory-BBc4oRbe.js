import{r as n,s as p,j as e,S as _}from"./index-BauRbZeW.js";const T=({onNavigate:u})=>{const[a,d]=n.useState("Todos"),[i,o]=n.useState(!1),[h,b]=n.useState([]),[x,m]=n.useState(!0),f={completado:"Concluído","processando...":"Pendente",rejectado:"Rejeitado"};n.useEffect(()=>{g()},[]);const g=async()=>{m(!0);const{data:{user:s}}=await p.auth.getUser();if(!s)return;const{data:t,error:k}=await p.from("deposits").select("*").eq("user_id",s.id).order("created_at",{ascending:!1});if(!k&&t){const v=t.map(r=>{const l=new Date(r.created_at),w=l.getDate().toString().padStart(2,"0"),S=["Jan","Fev","Mar","Abr","Mai","Jun","Jul","Ago","Set","Out","Nov","Dez"][l.getMonth()],C=l.getFullYear(),z=l.getHours().toString().padStart(2,"0"),$=l.getMinutes().toString().padStart(2,"0");return{id:r.id.toString(),title:r.nome_banco||"Transferência Bancária",date:`${w} ${S}, ${z}:${$}`,amount:r.amount,status:f[r.status_playment]||"Pendente",icon:"account_balance",month:`${l.toLocaleString("pt-PT",{month:"long"})} ${C}`,raw_date:r.created_at}});b(v)}m(!1)},j=["Todos","Concluído","Pendente","Rejeitado"],c=h.filter(s=>a==="Todos"||s.status===a),y=Array.from(new Set(c.map(s=>s.month))),N=s=>{d(s),o(!1)};return e.jsx("div",{className:"bg-background-dark font-display text-black antialiased min-h-screen flex flex-col selection:bg-primary selection:text-black",children:e.jsxs("div",{className:"relative flex h-full min-h-screen w-full flex-col overflow-x-hidden max-w-md mx-auto shadow-2xl",children:[e.jsxs("header",{className:"sticky top-0 z-50 flex items-center justify-between bg-background-dark/95 backdrop-blur-md p-4 pb-2 border-b border-gray-200",children:[e.jsx("button",{onClick:()=>u("deposit"),className:"text-primary flex size-10 shrink-0 items-center justify-center rounded-full hover:bg-white/10 transition-colors",children:e.jsx("span",{className:"material-symbols-outlined text-[24px]",children:"arrow_back"})}),e.jsx("h2",{className:"text-black text-lg font-bold leading-tight tracking-[-0.015em] flex-1 text-center",children:"Histórico de Depósito"}),e.jsxs("div",{className:"relative",children:[e.jsx("button",{onClick:()=>o(!i),className:`flex size-10 shrink-0 items-center justify-center rounded-full transition-colors ${i?"bg-primary text-black":"text-black hover:bg-white/10"}`,children:e.jsx("span",{className:"material-symbols-outlined text-[24px]",children:"filter_list"})}),i&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 z-10",onClick:()=>o(!1)}),e.jsxs("div",{className:"absolute right-0 mt-2 w-48 bg-surface-dark border border-white/10 rounded-2xl shadow-2xl z-20 py-2 overflow-hidden animate-in fade-in zoom-in duration-200 origin-top-right",children:[e.jsx("p",{className:"px-4 py-2 text-[10px] font-black uppercase tracking-widest text-gray-500 border-b border-gray-200 mb-1",children:"Filtrar por Status"}),j.map(s=>e.jsxs("button",{onClick:()=>N(s),className:`flex w-full items-center justify-between px-4 py-3 text-sm font-bold transition-colors ${a===s?"text-primary bg-primary/5":"text-gray-700 hover:bg-white/5"}`,children:[e.jsx("span",{children:s}),a===s&&e.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"check"})]},s))]})]})]})]}),e.jsxs("main",{className:"flex-1 flex flex-col no-scrollbar pt-2",children:[a!=="Todos"&&e.jsx("div",{className:"px-4 py-2",children:e.jsxs("div",{className:"inline-flex items-center gap-2 bg-primary/10 border border-primary/20 px-3 py-1.5 rounded-full",children:[e.jsxs("span",{className:"text-[10px] font-black text-primary uppercase tracking-widest",children:["Filtro: ",a]}),e.jsx("button",{onClick:()=>d("Todos"),className:"flex items-center justify-center hover:text-black text-primary",children:e.jsx("span",{className:"material-symbols-outlined text-[14px]",children:"close"})})]})}),e.jsxs("div",{className:"flex flex-col gap-6 pb-24",children:[x?e.jsxs("div",{className:"flex flex-col items-center justify-center py-20 animate-pulse",children:[e.jsx(_,{size:"w-12 h-12",className:"mb-4"}),e.jsx("p",{className:"text-gray-500 font-bold uppercase tracking-widest text-xs",children:"Carregando histórico..."})]}):y.map(s=>e.jsxs("div",{className:"flex flex-col",children:[e.jsx("div",{className:"px-4 pb-2 pt-2",children:e.jsx("h3",{className:"text-black text-lg font-bold leading-tight tracking-[-0.015em] capitalize",children:s})}),e.jsx("div",{className:"flex flex-col",children:c.filter(t=>t.month===s).map(t=>e.jsxs("div",{className:`flex items-center gap-4 px-4 py-4 justify-between hover:bg-gray-50 transition-colors cursor-pointer group border-b border-gray-100 last:border-0 ${t.status==="Rejeitado"?"opacity-60":""}`,children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:`flex items-center justify-center rounded-xl shrink-0 size-11 shadow-sm transition-transform group-active:scale-90 ${t.status==="Concluído"?"bg-primary text-black":"bg-gray-100 border border-gray-200 text-gray-600"}`,children:e.jsx("span",{className:"material-symbols-outlined text-[24px]",children:t.icon})}),e.jsxs("div",{className:"flex flex-col justify-center min-w-0",children:[e.jsx("p",{className:"text-[text-black] text-base font-bold leading-none truncate mb-1.5",children:t.title}),e.jsx("p",{className:"text-[#565959] text-xs font-medium leading-none",children:t.date})]})]}),e.jsxs("div",{className:"flex flex-col items-end gap-1.5 shrink-0",children:[e.jsxs("p",{className:`text-base font-black leading-none ${t.status==="Rejeitado"?"text-gray-500 line-through":"text-black"}`,children:[t.status==="Rejeitado"?"":"+ ",t.amount.toLocaleString()," Kz"]}),e.jsxs("div",{className:`flex items-center gap-1 px-2 py-0.5 rounded-full ${t.status==="Concluído"?"bg-green-500/10 text-green-600":t.status==="Pendente"?"bg-primary/10 text-primary":"bg-red-500/10 text-red-400"}`,children:[e.jsx("span",{className:"material-symbols-outlined text-[10px] font-bold",children:t.status==="Concluído"?"check_circle":t.status==="Pendente"?"schedule":"error"}),e.jsx("span",{className:"text-[9px] font-black uppercase tracking-widest",children:t.status})]})]})]},t.id))})]},s)),!x&&c.length===0&&e.jsxs("div",{className:"flex flex-col items-center justify-center py-20 opacity-30",children:[e.jsx("span",{className:"material-symbols-outlined text-6xl mb-2",children:"history"}),e.jsx("p",{className:"font-bold uppercase tracking-[0.2em] text-xs",children:"Nenhum registro encontrado"})]})]})]}),e.jsx("div",{className:"fixed bottom-6 right-6 z-20",children:e.jsx("button",{onClick:()=>window.print(),className:"flex h-14 w-14 items-center justify-center rounded-full bg-primary text-black shadow-xl shadow-primary/20 hover:scale-110 active:scale-95 transition-all",children:e.jsx("span",{className:"material-symbols-outlined text-[28px] font-bold",children:"download"})})})]})})};export{T as default};
