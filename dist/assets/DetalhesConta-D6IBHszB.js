import{r as c,s as n,j as e,S as h}from"./index-BauRbZeW.js";const j=({onNavigate:l,showToast:r})=>{var o,x;const[a,u]=c.useState(null),[i,d]=c.useState(!0);c.useEffect(()=>{f()},[]);const f=async()=>{d(!0);try{const{data:{user:s}}=await n.auth.getUser();if(!s){l("login");return}const{data:t,error:m}=await n.rpc("get_my_bank_accounts");m?console.error("Erro ao buscar dados bancários:",m):t&&t.length>0&&u(t[0])}catch(s){console.error("Erro inesperado:",s)}finally{d(!1)}},p=s=>{if(!s)return"from-[#2d2a1e] via-[#3d3a2e] to-[#1d1a0e]";const t=s.toUpperCase();return t.includes("BAI")?"from-[#002e5d] via-[#003d7c] to-[#001c3d]":t.includes("BFA")?"from-[#cca300] via-[#e6b800] to-[#997a00]":t.includes("BIC")?"from-[#d00000] via-[#ff0000] to-[#9a0000]":t.includes("ATLÂNTICO")||t.includes("ATL")?"from-[#0070c0] via-[#008ae6] to-[#005691]":t.includes("SOL")?"from-[#15803d] via-[#16a34a] to-[#14532d]":t.includes("BNI")?"from-[#4b0082] via-[#6a0dad] to-[#310055]":"from-[#334155] via-[#475569] to-[#1e293b]"},b=async()=>{if(a&&confirm("Tem certeza que deseja remover esta conta bancária?")){const{error:s}=await n.from("bancos_clientes").delete().eq("id",a.id);s?r==null||r("Erro ao remover conta: "+s.message,"error"):(r==null||r("Conta bancária removida com sucesso.","success"),l("profile"))}};return!i&&!a?e.jsxs("div",{className:"bg-background-dark font-display text-black antialiased min-h-screen flex flex-col p-6 items-center justify-center text-center",children:[e.jsx("span",{className:"material-symbols-outlined text-gray-700 text-6xl mb-4",children:"no_accounts"}),e.jsx("h2",{className:"text-xl font-bold mb-2",children:"Nenhuma conta vinculada"}),e.jsx("p",{className:"text-gray-500 text-sm mb-8",children:"Você ainda não adicionou um cartão bancário à sua conta Amazon."}),e.jsx("button",{onClick:()=>l("add-bank"),className:"w-full h-14 bg-primary text-black font-black rounded-2xl",children:"ADICIONAR CARTÃO"})]}):e.jsx("div",{className:"bg-background-dark font-display text-black antialiased min-h-screen flex flex-col selection:bg-primary selection:text-black",children:e.jsxs("div",{className:"relative flex h-full min-h-screen w-full flex-col overflow-x-hidden pb-4",children:[e.jsxs("header",{className:"sticky top-0 z-10 flex items-center justify-between bg-background-dark/95 px-4 py-3 backdrop-blur-md",children:[e.jsx("button",{onClick:()=>l("profile"),className:"flex size-10 shrink-0 items-center justify-center rounded-full active:bg-white/10 cursor-pointer transition-colors text-primary",children:e.jsx("span",{className:"material-symbols-outlined text-[24px]",children:"arrow_back"})}),e.jsx("h1",{className:"flex-1 text-center text-lg font-bold leading-tight tracking-tight text-black",children:"Cartão Bancário"}),e.jsx("button",{onClick:b,className:"flex size-10 shrink-0 items-center justify-center rounded-full hover:bg-red-500/10 text-red-500 transition-colors",children:e.jsx("span",{className:"material-symbols-outlined text-[24px]",children:"delete"})})]}),e.jsx("main",{className:"flex flex-col px-6 mt-6",children:i?e.jsx("div",{className:"w-full aspect-[1.586/1] bg-surface-dark rounded-[20px] animate-pulse flex items-center justify-center",children:e.jsx(h,{size:"w-8 h-8"})}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:`relative w-full aspect-[1.586/1] rounded-[20px] overflow-hidden shadow-2xl shadow-black/60 transition-transform active:scale-[0.99] duration-300 bg-gradient-to-br ${p(a==null?void 0:a.nome_banco)}`,children:[e.jsx("div",{className:"absolute inset-0 opacity-10 pointer-events-none",style:{backgroundImage:"radial-gradient(circle at 2px 2px, rgba(255,255,255,0.15) 1px, transparent 0)",backgroundSize:"10px 10px"}}),e.jsx("div",{className:"absolute -top-[100%] -left-[100%] w-[300%] h-[300%] bg-gradient-to-tr from-transparent via-white/10 to-transparent rotate-[25deg] pointer-events-none"}),e.jsxs("div",{className:"relative h-full flex flex-col p-5 z-10",children:[e.jsxs("div",{className:"flex justify-between items-start mb-1",children:[e.jsxs("div",{className:"flex items-center gap-2.5",children:[e.jsx("div",{className:"w-9 h-9 bg-white rounded-lg flex items-center justify-center p-1 shadow-inner",children:e.jsx("span",{className:"material-symbols-outlined text-black text-2xl",children:"account_balance"})}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-black text-base font-black tracking-tight leading-none uppercase",children:a==null?void 0:a.nome_banco}),e.jsx("span",{className:"text-[9px] text-black/70 font-bold uppercase tracking-widest mt-0.5",children:"CONTA CORRENTE"})]})]}),e.jsx("div",{className:"w-10 h-7 rounded bg-white/10 backdrop-blur-md flex items-center justify-center border border-white/10",children:e.jsxs("div",{className:"flex gap-1",children:[e.jsx("div",{className:"w-2.5 h-2.5 rounded-full bg-red-500/80"}),e.jsx("div",{className:"w-2.5 h-2.5 rounded-full bg-orange-500/80 -ml-1.5"})]})})]}),e.jsxs("div",{className:"flex items-center gap-3 mt-3",children:[e.jsx("div",{className:"w-10 h-8 rounded-md bg-gradient-to-br from-[#d4af37] via-[#fcf6ba] to-[#aa771c] relative overflow-hidden flex items-center justify-center shadow-inner ring-1 ring-black/5",children:e.jsx("div",{className:"absolute inset-0 grid grid-cols-3 grid-rows-2 gap-px p-0.5 opacity-30",children:[...Array(6)].map((s,t)=>e.jsx("div",{className:"border border-black/20 rounded-sm"},t))})}),e.jsx("span",{className:"material-symbols-outlined text-black/30 text-xl rotate-90",children:"contactless"})]}),e.jsxs("div",{className:"mt-auto mb-2",children:[e.jsx("p",{className:"text-[7px] text-black/60 font-black uppercase tracking-[0.3em] mb-1",children:"IBAN"}),e.jsx("p",{className:"text-[16px] font-mono font-bold text-black tracking-[0.08em] drop-shadow-md select-all leading-none",children:(x=(o=a==null?void 0:a.iban)==null?void 0:o.match(/.{1,4}/g))==null?void 0:x.join(" ")})]}),e.jsxs("div",{className:"flex justify-between items-end",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("p",{className:"text-[7px] text-black/60 font-black uppercase tracking-[0.3em] mb-0.5",children:"Titular"}),e.jsx("p",{className:"text-[13px] font-bold text-black tracking-wide uppercase leading-none",children:a==null?void 0:a.nome_completo})]}),e.jsx("span",{className:"text-[8px] text-black/40 font-black tracking-widest italic",children:"PREMIUM PLATINUM"})]})]})]}),e.jsxs("div",{className:"mt-10 flex flex-col gap-4 px-2",children:[e.jsxs("button",{onClick:()=>{navigator.clipboard.writeText((a==null?void 0:a.numero_iban)||""),r==null||r("IBAN copiado!","success")},className:"flex items-center justify-center gap-3 w-full h-14 rounded-2xl bg-primary text-black font-black text-base shadow-lg shadow-primary/20 active:scale-[0.98] transition-all",children:[e.jsx("span",{className:"material-symbols-outlined",children:"content_copy"}),e.jsx("span",{children:"COPIAR IBAN"})]}),e.jsx("p",{className:"text-center text-[10px] text-gray-500 font-bold uppercase tracking-[0.2em] leading-relaxed mt-4 px-6 opacity-60",children:"ESTE CARTÃO É PROTEGIDO POR PROTOCOLOS DE SEGURANÇA BANCÁRIA DA amazon AO"})]})]})})]})})};export{j as default};
