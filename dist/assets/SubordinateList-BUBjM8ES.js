import{r as c,j as e,S as u,s as i}from"./index-BauRbZeW.js";const j=({onNavigate:o})=>{const[s,x]=c.useState("L1"),[m,d]=c.useState(!0),[p,b]=c.useState({L1:[],L2:[],L3:[]}),h=async()=>{d(!0);try{const{data:{user:a}}=await i.auth.getUser();if(!a)return;const{data:r,error:n}=await i.rpc("get_user_network",{p_level:s});if(n)throw n;if(r.success&&r.data){const g=r.data.map(l=>({id:"hidden",phone:l.masked_phone,created_at:l.created_at,invested:l.invested||0}));b(l=>({...l,[s]:g}))}}catch(a){console.error("Erro ao carregar rede:",a)}finally{d(!1)}};c.useEffect(()=>{h()},[s]);const t=p[s]||[];return t.reduce((a,r)=>a+r.invested,0),e.jsxs("div",{className:"bg-background-dark font-display text-black antialiased min-h-screen flex flex-col",children:[e.jsxs("header",{className:"sticky top-0 z-50 flex items-center bg-background-dark/95 p-4 pb-2 justify-between border-b border-gray-200 backdrop-blur-md",children:[e.jsx("button",{onClick:()=>o("invite"),className:"text-primary flex size-10 shrink-0 items-center justify-center rounded-full hover:bg-white/10 transition-colors",children:e.jsx("span",{className:"material-symbols-outlined text-[24px]",children:"arrow_back"})}),e.jsx("h2",{className:"text-black text-lg font-bold leading-tight tracking-tight flex-1 text-center pr-10",children:"Equipe de Convidados"})]}),e.jsx("div",{className:"bg-background-dark sticky top-[61px] z-40 py-4 px-4 border-b border-gray-200",children:e.jsx("div",{className:"flex bg-surface-dark p-1 rounded-xl gap-1",children:["L1","L2","L3"].map(a=>e.jsxs("button",{onClick:()=>x(a),className:`flex-1 py-3 rounded-lg text-sm font-bold transition-all ${s===a?"bg-primary text-black shadow-lg shadow-primary/10":"text-gray-500 hover:text-gray-700"}`,children:["Nível ",a]},a))})}),e.jsx("main",{className:"flex-1 overflow-y-auto px-4 pt-4 pb-32 no-scrollbar",children:m?e.jsxs("div",{className:"flex flex-col items-center justify-center py-20 gap-4",children:[e.jsx(u,{size:"w-12 h-12"}),e.jsx("p",{className:"text-gray-500 font-bold uppercase tracking-widest text-xs",children:"Mapeando sua rede..."})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg-gradient-to-br from-surface-dark to-white p-5 rounded-2xl border border-gray-200 mb-6 shadow-xl",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("span",{className:"text-xs font-black uppercase tracking-widest text-primary",children:["Estatísticas ",s]}),e.jsx("span",{className:"material-symbols-outlined text-primary",children:"groups"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-[10px] text-gray-500 font-bold uppercase mb-1",children:"Membros"}),e.jsx("p",{className:"text-2xl font-black",children:t.length})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-[10px] text-gray-500 font-bold uppercase mb-1",children:"Total Equipe"}),e.jsx("p",{className:"text-2xl font-black text-primary",children:t.length})]})]})]}),e.jsxs("div",{className:"flex flex-col gap-3",children:[e.jsx("h3",{className:"text-xs font-black text-gray-500 uppercase tracking-widest px-1 mb-2",children:"Membros da Rede"}),t.length>0?t.map(a=>e.jsxs("div",{className:"bg-surface-dark p-4 rounded-2xl border border-gray-200 flex items-center gap-4 transition-transform active:scale-[0.98] shadow-sm",children:[e.jsx("div",{className:"size-12 rounded-full bg-primary/10 flex items-center justify-center text-primary border border-primary/20",children:e.jsx("span",{className:"material-symbols-outlined",children:"person"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-black font-bold text-base truncate",children:a.phone}),e.jsxs("p",{className:"text-gray-500 text-[10px] font-medium mt-0.5",children:["Registado em ",new Date(a.created_at).toLocaleDateString("pt-PT")]})]}),e.jsx("div",{className:"text-right",children:e.jsx("div",{className:"px-3 py-1 bg-green-500/10 rounded-full border border-green-500/20",children:e.jsx("span",{className:"text-[10px] text-green-600 font-black uppercase",children:"Ativo"})})})]},a.id)):e.jsxs("div",{className:"flex flex-col items-center justify-center py-20 opacity-30",children:[e.jsx("span",{className:"material-symbols-outlined text-6xl mb-2",children:"person_search"}),e.jsx("p",{className:"font-bold",children:"Nenhum subordinado neste nível"})]})]})]})}),e.jsx("div",{className:"fixed bottom-0 max-w-md w-full p-4 bg-background-dark/95 backdrop-blur-md border-t border-gray-200 text-center z-50",children:e.jsx("p",{className:"text-[10px] text-gray-600 leading-relaxed italic",children:"Os ganhos de comissão são processados automaticamente com base na atividade da sua rede em 3 níveis."})})]})};export{j as default};
