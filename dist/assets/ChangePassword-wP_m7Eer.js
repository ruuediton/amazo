import{r,j as e,S as k,s as S}from"./index-BauRbZeW.js";const w=({onNavigate:x,showToast:t})=>{const[n,p]=r.useState(!1),[c,b]=r.useState(!1),[o,h]=r.useState(!1),[u,g]=r.useState(""),[l,y]=r.useState(""),[d,j]=r.useState(""),[m,f]=r.useState(!1),[i,v]=r.useState(!1);r.useEffect(()=>{v(l.length===6)},[l]);const N=async a=>{if(a.preventDefault(),!u||!l||!d){t==null||t("Por favor, preencha todos os campos.","warning");return}if(l!==d){t==null||t("A nova senha e a confirmação não coincidem.","error");return}if(!i){t==null||t("A nova senha deve ter exatamente 6 dígitos.","error");return}f(!0);try{const{error:s}=await S.auth.updateUser({password:l});s?t==null||t(`Erro ao atualizar: ${s.message}`,"error"):(t==null||t("Senha alterada com sucesso!","success"),setTimeout(()=>x("profile"),2e3))}catch{t==null||t("Ocorreu um erro inesperado.","error")}finally{f(!1)}};return e.jsxs("div",{className:"relative flex min-h-screen w-full flex-col overflow-x-hidden bg-background-dark font-display text-black antialiased",children:[e.jsxs("header",{className:"sticky top-0 z-10 flex items-center justify-between px-4 py-3 bg-background-dark/95 backdrop-blur-md border-b border-gray-200",children:[e.jsx("button",{onClick:()=>x("profile"),className:"flex size-10 items-center justify-center rounded-full hover:bg-white/10 transition-colors",children:e.jsx("span",{className:"material-symbols-outlined text-primary",style:{fontSize:"24px"},children:"arrow_back"})}),e.jsx("h1",{className:"text-lg font-bold leading-tight tracking-tight flex-1 text-center pr-10",children:"Trocar Senha"})]}),e.jsxs("main",{className:"flex-1 px-5 py-2 flex flex-col",children:[e.jsxs("div",{className:"mb-6 mt-2",children:[e.jsx("h2",{className:"text-[28px] font-bold leading-tight tracking-tight mb-3",children:"Alterar Senha de Acesso"}),e.jsx("p",{className:"text-[text-gray-400] text-base font-normal leading-relaxed",children:"Para sua segurança, crie uma senha forte que você não use em outros sites."})]}),e.jsxs("form",{className:"flex flex-col gap-5",onSubmit:N,children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"text-sm font-medium leading-normal text-black ml-1",children:"Senha atual"}),e.jsxs("div",{className:"relative flex items-center",children:[e.jsx("input",{value:u,onChange:a=>g(a.target.value),className:"w-full h-14 rounded-xl border border-[#423f30] bg-surface-dark px-4 pr-12 text-base text-black placeholder-[text-gray-400] focus:border-primary focus:ring-1 focus:ring-primary outline-none transition-all",placeholder:"Digite sua senha atual",type:n?"text":"password"}),e.jsx("button",{type:"button",onClick:()=>p(!n),className:"absolute right-0 top-0 h-full w-12 flex items-center justify-center text-[text-gray-400] hover:text-primary transition-colors",children:e.jsx("span",{className:"material-symbols-outlined",style:{fontSize:"24px"},children:n?"visibility":"visibility_off"})})]}),e.jsx("div",{className:"flex justify-end pt-1",children:e.jsx("button",{type:"button",className:"text-sm font-medium text-[text-gray-400] hover:text-primary transition-colors underline decoration-primary/30 underline-offset-4",children:"Esqueceu sua senha?"})})]}),e.jsxs("div",{className:"space-y-1 pt-2",children:[e.jsx("label",{className:"text-sm font-medium leading-normal text-black ml-1",children:"Nova senha"}),e.jsxs("div",{className:"relative flex items-center",children:[e.jsx("input",{value:l,onChange:a=>{const s=a.target.value.replace(/\D/g,"").slice(0,6);y(s)},className:"w-full h-14 rounded-xl border border-[#423f30] bg-surface-dark px-4 pr-12 text-base text-black placeholder-[text-gray-400] focus:border-primary focus:ring-1 focus:ring-primary outline-none transition-all",placeholder:"Crie uma nova senha (6 dígitos)",type:c?"text":"password",maxLength:6,inputMode:"numeric"}),e.jsx("button",{type:"button",onClick:()=>b(!c),className:"absolute right-0 top-0 h-full w-12 flex items-center justify-center text-[text-gray-400] hover:text-primary transition-colors",children:e.jsx("span",{className:"material-symbols-outlined",style:{fontSize:"24px"},children:c?"visibility":"visibility_off"})})]}),e.jsxs("div",{className:"p-4 mt-3 rounded-xl bg-surface-dark/50 border border-[#423f30]/50",children:[e.jsx("p",{className:"text-xs font-semibold text-[text-gray-400] uppercase tracking-wider mb-3",children:"Requisitos da senha"}),e.jsx("ul",{className:"space-y-2",children:e.jsxs("li",{className:`flex items-center gap-3 text-sm transition-colors ${i?"text-primary font-medium":"text-[text-gray-400]"}`,children:[e.jsx("div",{className:`size-4 rounded-full flex items-center justify-center ${i?"bg-primary text-black":"border border-current"}`,children:i?e.jsx("span",{className:"material-symbols-outlined",style:{fontSize:"12px",fontWeight:"bold"},children:"check"}):e.jsx("div",{className:"size-2 rounded-full bg-transparent"})}),"Exatamente 6 dígitos numéricos"]})})]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"text-sm font-medium leading-normal text-black ml-1",children:"Confirmar nova senha"}),e.jsxs("div",{className:"relative flex items-center",children:[e.jsx("input",{value:d,onChange:a=>{const s=a.target.value.replace(/\D/g,"").slice(0,6);j(s)},className:"w-full h-14 rounded-xl border border-[#423f30] bg-surface-dark px-4 pr-12 text-base text-black placeholder-[text-gray-400] focus:border-primary focus:ring-1 focus:ring-primary outline-none transition-all",placeholder:"Repita a nova senha",type:o?"text":"password",maxLength:6,inputMode:"numeric"}),e.jsx("button",{type:"button",onClick:()=>h(!o),className:"absolute right-0 top-0 h-full w-12 flex items-center justify-center text-[text-gray-400] hover:text-primary transition-colors",children:e.jsx("span",{className:"material-symbols-outlined",style:{fontSize:"24px"},children:o?"visibility":"visibility_off"})})]})]}),e.jsx("div",{className:"flex-1 min-h-[40px]"}),e.jsx("button",{type:"submit",disabled:m,className:`w-full h-14 rounded-full bg-primary hover:bg-primary/90 active:scale-[0.98] transition-all flex items-center justify-center shadow-lg shadow-primary/20 mb-6 ${m?"opacity-50":""}`,children:m?e.jsx(k,{size:"w-6 h-6",className:"text-black"}):e.jsx("span",{className:"text-[#181711] text-base font-bold tracking-wide",children:"Confirmar Alteração"})})]})]})]})};export{w as default};
