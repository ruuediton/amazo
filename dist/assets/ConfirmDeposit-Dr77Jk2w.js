import{r as l,j as e,s as u}from"./index-BauRbZeW.js";const C=({onNavigate:n,data:a,showToast:r})=>{const[t,h]=l.useState(()=>{if(a!=null&&a.deposit)return a.deposit;const s=localStorage.getItem("current_deposit_data");return s?JSON.parse(s):null});l.useEffect(()=>{a!=null&&a.deposit&&(h(a.deposit),localStorage.setItem("current_deposit_data",JSON.stringify(a.deposit)))},[a]);const[g,d]=l.useState("30:00"),[i,j]=l.useState(!1),[x,m]=l.useState(!1),y=async()=>{if(t){m(!0);try{const{error:s}=await u.from("depositos_clientes").delete().eq("id",t.id).eq("estado_de_pagamento","processando...");if(s)throw s;r==null||r("Depósito cancelado e removido.","info"),localStorage.removeItem("current_deposit_data"),n("deposit")}catch(s){r==null||r("Erro ao cancelar: "+s.message,"error")}finally{m(!1)}}};l.useEffect(()=>{if(!t)return;const s=()=>{const N=new Date(t.created_at).getTime(),v=1800*1e3,k=N+v,_=Date.now(),f=k-_;if(f<=0)return d("00:00"),i||(j(!0),o()),!1;const b=Math.max(0,Math.ceil(f/1e3)),w=Math.floor(b/60),S=b%60;return d(`${w.toString().padStart(2,"0")}:${S.toString().padStart(2,"0")}`),!0},o=async()=>{t.estado_de_pagamento==="processando..."&&(await u.from("depositos_clientes").delete().eq("id",t.id).eq("estado_de_pagamento","processando..."),localStorage.removeItem("current_deposit_data"))};s();const p=setInterval(()=>{s()||clearInterval(p)},1e3);return()=>clearInterval(p)},[t]);const c=(s,o)=>{navigator.clipboard.writeText(s),r==null||r(`${o} copiado!`,"success")};return t?e.jsx("div",{className:"bg-background-dark font-display text-black min-h-screen flex flex-col selection:bg-primary selection:text-neutral-dark antialiased",children:e.jsxs("div",{className:"relative flex h-full min-h-screen w-full flex-col max-w-md mx-auto shadow-xl",children:[e.jsxs("header",{className:"flex items-center justify-between p-4 pb-2 sticky top-0 z-10 bg-background-dark/80 backdrop-blur-md border-b border-amazon-border",children:[e.jsx("button",{onClick:()=>n("deposit"),className:"flex size-10 items-center justify-center rounded-full hover:bg-surface-dark transition-colors",children:e.jsx("span",{className:"material-symbols-outlined text-primary",style:{fontSize:"24px"},children:"arrow_back"})}),e.jsx("h2",{className:"text-text-primary text-lg font-bold leading-tight tracking-[-0.015em] text-center",children:"Confirmar Depósito"}),e.jsx("button",{className:"flex size-10 items-center justify-center rounded-full hover:bg-surface-dark transition-colors",children:e.jsx("span",{className:"material-symbols-outlined text-text-primary",style:{fontSize:"24px"},children:"more_horiz"})})]}),e.jsxs("main",{className:"flex-1 flex flex-col px-6 pt-6 pb-32 overflow-y-auto no-scrollbar",children:[e.jsx("div",{className:"flex flex-col items-center justify-center mb-8",children:e.jsxs("div",{className:"flex flex-col items-center bg-warning-bg border border-amazon-border rounded-2xl p-6 w-full shadow-sm",children:[e.jsx("span",{className:"text-[10px] font-black uppercase tracking-[0.2em] text-text-secondary mb-3 text-center",children:"Tempo restante para depósito"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"material-symbols-outlined text-warning-text text-3xl font-bold",children:"schedule"}),e.jsx("span",{className:"text-4xl font-extrabold tracking-tighter tabular-nums text-text-primary",children:g})]})]})}),e.jsxs("div",{className:"flex flex-col items-center justify-center mb-8",children:[e.jsx("p",{className:"text-gray-500 text-sm font-medium mb-1",children:"Valor a depositar"}),e.jsxs("h1",{className:"text-primary tracking-tight text-[40px] font-extrabold leading-tight text-center",children:[(Number(t.valor_deposito)||0).toLocaleString("pt-AO",{minimumFractionDigits:2})," Kz"]})]}),e.jsxs("div",{className:"bg-white/5 rounded-2xl p-5 space-y-6 border border-gray-200 shadow-inner",children:[e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsxs("div",{className:"flex items-center gap-2 text-text-secondary",children:[e.jsx("span",{className:"material-symbols-outlined text-lg",children:"person"}),e.jsx("p",{className:"text-[10px] font-black uppercase tracking-widest leading-none",children:"Nome do Beneficiário"})]}),e.jsxs("div",{className:"flex justify-between items-center mt-1",children:[e.jsx("p",{className:"text-text-primary text-base font-bold uppercase truncate pr-4",children:t.nome_destinatario||t.beneficiario||"N/A"}),e.jsx("button",{onClick:()=>c(t.nome_destinatario||t.beneficiario||"","Nome"),className:"text-text-primary hover:scale-110 active:scale-95 transition-all bg-primary/10 size-8 flex items-center justify-center rounded-md",children:e.jsx("span",{className:"material-symbols-outlined text-lg font-bold",children:"content_copy"})})]})]}),e.jsx("div",{className:"h-px bg-white/10"}),e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsxs("div",{className:"flex items-center gap-2 text-gray-500",children:[e.jsx("span",{className:"material-symbols-outlined text-lg",children:"account_balance"}),e.jsx("p",{className:"text-[10px] font-black uppercase tracking-widest leading-none",children:"Banco Destino"})]}),e.jsxs("div",{className:"flex justify-between items-center mt-1",children:[e.jsx("p",{className:"text-black text-base font-bold uppercase",children:t.nome_banco||t.nome_do_banco||"N/A"}),e.jsx("button",{onClick:()=>c(t.nome_banco||t.nome_do_banco||"","Banco"),className:"text-primary hover:scale-110 active:scale-95 transition-all bg-primary/10 size-8 flex items-center justify-center rounded-md",children:e.jsx("span",{className:"material-symbols-outlined text-lg font-bold",children:"content_copy"})})]})]}),e.jsx("div",{className:"h-px bg-white/10"}),e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsxs("div",{className:"flex items-center gap-2 text-gray-500",children:[e.jsx("span",{className:"material-symbols-outlined text-lg",children:"numbers"}),e.jsx("p",{className:"text-[10px] font-black uppercase tracking-widest leading-none",children:"IBAN"})]}),e.jsxs("div",{className:"flex justify-between items-center mt-1",children:[e.jsx("p",{className:"text-black text-sm font-bold break-all leading-relaxed flex-1 pr-4 select-all",children:t.iban}),e.jsx("button",{onClick:()=>c(t.iban,"IBAN"),className:"text-primary hover:scale-110 active:scale-95 transition-all bg-primary/10 size-8 flex items-center justify-center rounded-md",children:e.jsx("span",{className:"material-symbols-outlined text-lg font-bold",children:"content_copy"})})]})]})]}),e.jsx("div",{className:"mt-8",children:e.jsxs("div",{className:"flex items-start gap-4 px-4 py-4 rounded-2xl bg-warning-bg border border-amazon-border",children:[e.jsx("div",{className:"bg-warning-text size-6 rounded-full flex items-center justify-center shrink-0 mt-0.5",children:e.jsx("span",{className:"material-symbols-outlined text-white text-sm font-bold",children:"info"})}),e.jsx("p",{className:"text-warning-text text-xs leading-relaxed font-bold",children:"Faça a transferência no valor exato e envie o comprovativo para validar o seu depósito no suporte."})]})}),e.jsx("div",{className:"mt-6 flex justify-center",children:e.jsxs("button",{disabled:x,onClick:y,className:"text-red-500 text-sm font-bold hover:text-red-400 transition-colors flex items-center gap-2 py-2 px-4 rounded-xl hover:bg-red-500/5 active:scale-95",children:[e.jsx("span",{className:"material-symbols-outlined text-lg",children:"cancel"}),x?"Cancelando...":"Cancelar Depósito"]})})]}),e.jsxs("footer",{className:"fixed bottom-0 w-full max-w-md bg-background-dark/95 p-4 border-t border-gray-200 backdrop-blur-xl pb-6",children:[e.jsxs("button",{disabled:i,onClick:()=>n("como-enviar-comprovante"),className:`w-full flex items-center justify-center gap-3 rounded-xl h-14 px-5 bg-primary overflow-hidden hover:bg-[#eac515] active:scale-[0.98] transition-all text-[#181711] text-base font-black tracking-wide shadow-lg shadow-primary/20 ${i?"opacity-30 grayscale cursor-not-allowed":""}`,children:[e.jsxs("svg",{className:"size-6",fill:"currentColor",viewBox:"0 0 24 24",children:[e.jsx("path",{d:"M12.031 6.172c-3.181 0-5.767 2.586-5.768 5.766-.001 1.298.38 2.27 1.019 3.287l-.582 2.128 2.182-.573c.978.58 1.911.928 3.145.929 3.178 0 5.767-2.587 5.768-5.766 0-3.18-2.587-5.771-5.764-5.771zm3.392 8.244c-.144.405-.837.774-1.17.824-.299.045-.677.063-1.092-.069-.252-.08-.575-.187-.988-.365-1.739-.747-2.874-2.512-2.96-2.626-.087-.115-.708-.941-.708-1.793 0-.852.449-1.27.608-1.441.159-.171.348-.215.464-.215.116 0 .232.001.333.006.106.005.249-.04.391.302.144.348.491 1.196.535 1.282.043.086.072.187.015.302-.058.115-.087.187-.174.287-.087.1-.183.224-.26.31-.087.086-.177.18-.076.352.101.171.449.741.964 1.201.663.591 1.221.777 1.394.863.174.086.275.072.376-.043.101-.115.434-.503.55-.675.115-.172.231-.144.39-.086.158.058 1.011.477 1.184.563.174.086.289.129.332.201.043.072.043.418-.101.823z"}),e.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12 2C6.477 2 2 6.477 2 12c0 1.891.524 3.662 1.435 5.176L2 22l4.957-1.301c1.465.778 3.12 1.301 5.043 1.301 5.523 0 10-4.477 10-10S17.523 2 12 2zM4 12c0-4.418 3.582-8 8-8s8 3.582 8 8-3.582 8-8 8c-1.708 0-3.284-.537-4.577-1.445l-.33-.232-2.316.608.619-2.261-.252-.361C4.596 14.94 4 13.541 4 12z"})]}),e.jsx("span",{className:"font-bold",children:"Enviar Comprovante"})]}),e.jsx("div",{className:"flex justify-center mt-3",children:e.jsxs("button",{onClick:()=>n("support"),className:"text-[11px] font-bold text-gray-600 hover:text-primary transition-colors flex items-center gap-1 uppercase tracking-widest",children:["Falar com Suporte ",e.jsx("span",{className:"material-symbols-outlined shrink-0",style:{fontSize:"14px"},children:"arrow_forward"})]})})]})]})}):e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-background-dark text-black p-6 text-center",children:[e.jsx("span",{className:"material-symbols-outlined text-6xl mb-4 text-gray-600",children:"error"}),e.jsx("h3",{className:"text-xl font-bold mb-2",children:"Dados não encontrados"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Não foi possível carregar os detalhes deste depósito."}),e.jsx("button",{onClick:()=>n("deposit"),className:"bg-primary text-black px-8 py-3 rounded-xl font-bold",children:"Voltar ao Depósito"})]})};export{C as default};
