import{r as i,s as x,j as e,S as j}from"./index-BauRbZeW.js";const N=({onNavigate:m})=>{const[c,p]=i.useState([]),[b,o]=i.useState(!0),[h,u]=i.useState(new Date);i.useEffect(()=>{f();const t=setInterval(()=>u(new Date),3e4);return()=>clearInterval(t)},[]);const f=async()=>{o(!0);try{const{data:{user:t}}=await x.auth.getUser();if(!t)return;const{data:s,error:a}=await x.from("retirada_clientes").select("*").eq("user_id",t.id).order("data_de_criacao",{ascending:!1});if(a)throw a;p(s||[])}catch(t){console.error("Error fetching withdrawal history:",t)}finally{o(!1)}},d=t=>{const s=new Date(t).getTime(),a=h.getTime(),l=1440*60*1e3,r=a-s;return Math.min(Math.max(r/l*100,0),100)},g=t=>{const s=d(t.data_de_criacao);return t.estado_da_retirada==="pendente"&&s>=100?"processado":t.estado_da_retirada};return e.jsxs("div",{className:"bg-[#0a0a0b] font-display text-white antialiased min-h-screen flex flex-col",children:[e.jsxs("header",{className:"sticky top-0 z-50 flex items-center justify-between bg-[#0a0a0b]/80 px-6 py-4 backdrop-blur-xl border-b border-white/5",children:[e.jsx("button",{onClick:()=>m("withdrawal"),className:"group flex items-center justify-center w-10 h-10 rounded-full bg-white/5 hover:bg-white/10 active:scale-90 transition-all border border-white/10",children:e.jsx("span",{className:"material-symbols-outlined text-amber-500 text-[22px] group-hover:-translate-x-0.5 transition-transform",children:"arrow_back"})}),e.jsx("h1",{className:"text-[15px] font-black flex-1 text-center pr-10 tracking-[0.1em] uppercase",children:"Registros"})]}),e.jsx("main",{className:"flex-1 overflow-y-auto no-scrollbar pb-10 animate-in fade-in duration-700",children:b?e.jsx("div",{className:"flex items-center justify-center py-20",children:e.jsx(j,{size:"w-10 h-10",className:"text-amber-500"})}):c.length>0?e.jsx("div",{className:"p-6 space-y-4",children:c.map(t=>{const s=d(t.data_de_criacao),a=g(t),l=t.valor_solicitado-(t.taxa_12_porcento||t.valor_solicitado*.12),r=a==="aprovado"||a==="processado"||a==="completado",n=a==="pendente";return e.jsxs("div",{className:"bg-white/[0.03] backdrop-blur-md rounded-3xl p-5 border border-white/5 shadow-2xl space-y-4 hover:bg-white/[0.05] transition-all group",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`size-10 rounded-2xl flex items-center justify-center border ${r?"bg-green-500/10 border-green-500/20 text-green-400":n?"bg-amber-500/10 border-amber-500/20 text-amber-400":"bg-red-500/10 border-red-500/20 text-red-400"}`,children:e.jsx("span",{className:"material-symbols-outlined text-[20px]",children:n?"schedule":a==="cancelado"?"block":"account_balance_wallet"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-[14px] font-black text-white",children:t.nome_do_banco}),e.jsx("p",{className:"text-[10px] text-gray-500 font-black uppercase tracking-widest",children:t.data_da_retirada})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"text-[16px] font-black text-white",children:["Kz ",t.valor_solicitado.toLocaleString()]}),e.jsx("span",{className:`text-[9px] font-black uppercase px-2 py-0.5 rounded-lg border ${r?"bg-green-500/5 border-green-500/20 text-green-400":n?"bg-amber-500/5 border-amber-500/20 text-amber-400":"bg-red-500/5 border-red-500/20 text-red-400"}`,children:a})]})]}),e.jsxs("div",{className:"flex items-center justify-between pt-3 border-t border-white/5",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-[9px] text-gray-500 font-black uppercase tracking-tighter mb-0.5",children:"Líquido a receber"}),e.jsxs("span",{className:"text-[13px] font-black text-amber-500",children:["Kz ",l.toLocaleString()]})]}),e.jsxs("div",{className:"text-right min-w-0 flex-1 ml-4 overflow-hidden",children:[e.jsx("span",{className:"text-[9px] text-gray-500 font-black uppercase tracking-tighter mb-0.5 block",children:"IBAN de Destino"}),e.jsx("span",{className:"text-[10px] text-gray-400 font-mono truncate block",children:t.iban})]})]}),n&&e.jsxs("div",{className:"pt-2",children:[e.jsxs("div",{className:"flex justify-between items-center mb-1.5 px-0.5",children:[e.jsx("span",{className:"text-[9px] font-black text-gray-500 uppercase tracking-widest",children:"Protocolo de Verificação"}),e.jsxs("span",{className:"text-[10px] font-black text-amber-500",children:[s.toFixed(0),"%"]})]}),e.jsx("div",{className:"w-full h-1.5 bg-white/5 rounded-full overflow-hidden border border-white/5",children:e.jsx("div",{className:"h-full bg-gradient-to-r from-amber-600 to-amber-400 transition-all duration-1000 ease-out shadow-[0_0_8px_rgba(245,158,11,0.5)]",style:{width:`${s}%`}})})]})]},t.id)})}):e.jsxs("div",{className:"flex flex-col items-center justify-center py-40 px-10 text-center opacity-10",children:[e.jsx("span",{className:"material-symbols-outlined text-7xl mb-6",children:"history_toggle_off"}),e.jsx("p",{className:"font-black uppercase tracking-[0.3em] text-[12px]",children:"Sem Movimentações"})]})})]})};export{N as default};
