import{u as j,r as i,j as e,S as N,s as v}from"./index-BauRbZeW.js";const w=({onNavigate:c,showToast:s})=>{const{withLoading:p}=j(),[t,u]=i.useState(""),[l,b]=i.useState(""),[n,g]=i.useState(""),[d,o]=i.useState(!1),y=.02,r=Number(l),x=r>0?r*y:0,h=r+x,f=async()=>{if(!t||!l||!n){s==null||s("Preencha todos os campos.","warning");return}if(r<100){s==null||s("Mínimo de transferência é 100 Kz.","warning");return}o(!0);try{await p(async()=>{const{data:a,error:m}=await v.rpc("transfer_p2p",{p_receiver_phone:t,p_amount:r,p_password:n});if(m)throw m;if(a&&a.success)s==null||s(`Transferência realizada! Enviado: ${a.sent_amount} Kz (+${a.fee} taxa)`,"success"),c("wallet");else throw new Error((a==null?void 0:a.message)||"Erro na transferência.")})}catch(a){s==null||s(a.message||"Erro ao processar transferência.","error")}finally{o(!1)}};return e.jsxs("div",{className:"bg-background-dark min-h-screen font-display text-gray-900 pb-20",children:[e.jsx("header",{className:"bg-white/90 backdrop-blur-md border-b border-gray-100 sticky top-0 z-50",children:e.jsxs("div",{className:"flex items-center p-4 justify-between",children:[e.jsx("button",{onClick:()=>c("wallet"),className:"size-10 flex items-center justify-center rounded-xl bg-gray-50 text-gray-600 hover:bg-gray-100 transition-colors",children:e.jsx("span",{className:"material-symbols-outlined",children:"arrow_back"})}),e.jsx("h1",{className:"text-lg font-black text-gray-900 uppercase tracking-tight",children:"Transferência P2P"}),e.jsx("div",{className:"size-10"})]})}),e.jsxs("main",{className:"p-6 max-w-lg mx-auto",children:[e.jsxs("div",{className:"bg-primary/10 border border-primary/20 rounded-2xl p-6 mb-8 text-center relative overflow-hidden",children:[e.jsxs("div",{className:"relative z-10",children:[e.jsx("span",{className:"material-symbols-outlined text-4xl text-primary mb-2",children:"currency_exchange"}),e.jsx("p",{className:"text-sm font-bold text-gray-800 uppercase tracking-wide",children:"Envie dinheiro na hora"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Transfira saldo para outros membros Amazon instantaneamente."})]}),e.jsx("div",{className:"absolute -right-4 -bottom-4 text-primary/10",children:e.jsx("span",{className:"material-symbols-outlined text-9xl",children:"send"})})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-xs font-black text-gray-400 uppercase tracking-widest ml-1",children:"Telefone do Destinatário"}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute left-4 top-1/2 -translate-y-1/2 material-symbols-outlined text-gray-400",children:"person_search"}),e.jsx("input",{type:"tel",placeholder:"Ex: 923456789",value:t,onChange:a=>u(a.target.value),className:"w-full h-14 pl-12 pr-4 bg-white border border-gray-200 rounded-2xl focus:border-primary outline-none font-bold text-lg text-gray-900 placeholder:text-gray-300 transition-all shadow-sm"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-xs font-black text-gray-400 uppercase tracking-widest ml-1",children:"Valor a enviar (Kz)"}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute left-4 top-1/2 -translate-y-1/2 font-black text-gray-400",children:"Kz"}),e.jsx("input",{type:"number",placeholder:"0.00",value:l,onChange:a=>b(a.target.value),className:"w-full h-14 pl-12 pr-4 bg-white border border-gray-200 rounded-2xl focus:border-primary outline-none font-black text-xl text-gray-900 placeholder:text-gray-300 transition-all shadow-sm"})]})]}),e.jsxs("div",{className:"bg-gray-50 border border-gray-100 rounded-2xl p-4 space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center text-sm",children:[e.jsx("span",{className:"text-gray-500 font-medium",children:"Valor do Envio"}),e.jsxs("span",{className:"text-gray-900 font-bold",children:["Kz ",r.toLocaleString("pt-AO")]})]}),e.jsxs("div",{className:"flex justify-between items-center text-sm",children:[e.jsx("span",{className:"text-gray-500 font-medium",children:"Taxa de Serviço (2%)"}),e.jsxs("span",{className:"text-red-500 font-bold",children:["+ Kz ",x.toLocaleString("pt-AO")]})]}),e.jsx("div",{className:"h-px bg-gray-200 my-1"}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-gray-900 font-black uppercase text-xs tracking-wider",children:"Total a Debitar"}),e.jsxs("span",{className:"text-primary font-black text-lg",children:["Kz ",h.toLocaleString("pt-AO")]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-xs font-black text-gray-400 uppercase tracking-widest ml-1",children:"Senha de Retirada"}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute left-4 top-1/2 -translate-y-1/2 material-symbols-outlined text-gray-400",children:"lock"}),e.jsx("input",{type:"password",placeholder:"******",value:n,onChange:a=>g(a.target.value),className:"w-full h-14 pl-12 pr-4 bg-white border border-gray-200 rounded-2xl focus:border-primary outline-none font-bold text-lg text-gray-900 placeholder:text-gray-300 transition-all shadow-sm"})]})]}),e.jsx("button",{onClick:f,disabled:d||!l||!t||!n,className:"w-full h-14 bg-black text-white font-black uppercase tracking-widest rounded-2xl shadow-xl hover:bg-gray-900 active:scale-95 disabled:opacity-50 disabled:scale-100 transition-all flex items-center justify-center gap-2 mt-4",children:d?e.jsx(N,{size:"w-6 h-6",className:"text-white"}):"Confirmar Transferência"})]})]})]})};export{w as default};
